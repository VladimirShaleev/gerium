frame graph:
  - name: gbuffer_pass
    inputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: command_count
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: commands
    outputs:
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: albedo
        format: GERIUM_FORMAT_R8G8B8A8_UNORM
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [1.0, 1.0, 1.0, 1.0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: normal
        format: GERIUM_FORMAT_R16G16B16A16_SFLOAT
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [1.0, 1.0, 1.0, 1.0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: ao_roughness_metallic
        format: GERIUM_FORMAT_R8G8B8A8_UNORM
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [1.0, 1.0, 1.0, 1.0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: motion
        format: GERIUM_FORMAT_R16G16_SFLOAT
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [0.0, 0.0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: depth
        format: GERIUM_FORMAT_D32_SFLOAT
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear depth stencil attachment: [0.0, 0]
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: meshlet_visibility
        size: 134217728
        fill value: 4294967295
        usage: [GERIUM_BUFFER_USAGE_STORAGE_BIT]

  - name: culling_pass
    compute: true
    outputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: command_count
        size: 16
        usage: [GERIUM_BUFFER_USAGE_STORAGE_BIT, GERIUM_BUFFER_USAGE_INDIRECT_BIT]
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: commands
        size: 134217728
        usage: [GERIUM_BUFFER_USAGE_STORAGE_BIT]
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: visibility
        size: 4096
        fill value: 4294967295
        usage: [GERIUM_BUFFER_USAGE_STORAGE_BIT]

  - name: culling_late_pass
    compute: true
    inputs:
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: depth_pyramid
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: commands
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: visibility
    outputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: command_count_late
        size: 16
        usage: [GERIUM_BUFFER_USAGE_STORAGE_BIT, GERIUM_BUFFER_USAGE_INDIRECT_BIT]

  - name: indirect_pass
    compute: true
    inputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: command_count
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: commands

  - name: depth_pyramid_pass
    compute: true
    inputs:
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: depth
    outputs:
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: depth_pyramid
        external: true

  - name: present_pass
    inputs:
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: depth
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: albedo
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: normal
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: ao_roughness_metallic
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: motion
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: debug_depth
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: debug_albedo
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: debug_normal
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: debug_ao_roughness_metallic
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: debug_motion
      - type: GERIUM_RESOURCE_TYPE_REFERENCE
        name: stub_dep_1

  - name: indirect_late_pass
    compute: true
    inputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: command_count_late
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: commands

  - name: gbuffer_late_pass
    inputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: command_count_late
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: commands
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: meshlet_visibility
      - type: GERIUM_RESOURCE_TYPE_TEXTURE
        name: depth_pyramid
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: albedo
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: normal
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: ao_roughness_metallic
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: motion
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: depth
    outputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: stub_dep_0
        size: 4
        usage: [GERIUM_BUFFER_USAGE_STORAGE_BIT]

  - name: debug_occlusion_pass
    inputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: command_count_late
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: commands
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: meshlet_visibility
      - type: GERIUM_RESOURCE_TYPE_REFERENCE
        name: stub_dep_0
    outputs:
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: debug_depth
        format: GERIUM_FORMAT_D32_SFLOAT
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear depth stencil attachment: [0.0, 0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: debug_albedo
        format: GERIUM_FORMAT_R8G8B8A8_UNORM
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [1.0, 1.0, 1.0, 1.0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: debug_normal
        format: GERIUM_FORMAT_R16G16B16A16_SFLOAT
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [1.0, 1.0, 1.0, 1.0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: debug_ao_roughness_metallic
        format: GERIUM_FORMAT_R8G8B8A8_UNORM
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [1.0, 1.0, 1.0, 1.0]
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: debug_motion
        format: GERIUM_FORMAT_R16G16_SFLOAT
        render pass op: GERIUM_RENDER_PASS_OP_CLEAR
        clear color attachment: [0.0, 0.0]

  - name: debug_line_pass
    inputs:
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: debug_albedo
      - type: GERIUM_RESOURCE_TYPE_REFERENCE
        name: debug_normal
      - type: GERIUM_RESOURCE_TYPE_REFERENCE
        name: debug_ao_roughness_metallic
      - type: GERIUM_RESOURCE_TYPE_REFERENCE
        name: debug_motion
      - type: GERIUM_RESOURCE_TYPE_ATTACHMENT
        name: debug_depth
    outputs:
      - type: GERIUM_RESOURCE_TYPE_BUFFER
        name: stub_dep_1
        size: 4
        usage: [GERIUM_BUFFER_USAGE_STORAGE_BIT]
